<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="hrm_theme.ControlPanel" t-inherit="web.ControlPanel" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('o_control_panel_main')]" position="attributes">
        </xpath>
    </t>

  <t t-name="hrm_theme.Breadcrumbs">
        <t t-set="currentBreadcrumbs" t-value="breadcrumbs.slice(-1)"/>
    <t t-set="visiblePathBreadcrumbs" t-value="breadcrumbs.slice(-3, -1)"/>
    <t t-set="collapsedBreadcrumbs" t-value="breadcrumbs.slice(0, -3).reverse()"/>
    <t t-set="breadcrumb" t-value="currentBreadcrumbs[0] || {}"/>
    <div t-if="collapsedBreadcrumbs.length || visiblePathBreadcrumbs.length"
         class="o_breadcrumb d-flex flex-row flex-md-column align-self-stretch justify-content-between min-w-0">
            <t t-if="env.isSmall">
                <t t-set="previousBreadcrumb" t-value="visiblePathBreadcrumbs.slice(-1)"/>
              <button class="o_back_button btn btn-link px-1"
                      t-on-click.prevent="() => this.onBreadcrumbClicked(previousBreadcrumb.jsId)">
                    <i class="oi oi-fw oi-arrow-left"/>
                </button>
            </t>
      <t t-else="">
                <ol class="breadcrumb flex-nowrap text-nowrap small lh-sm">
                    <li t-if="collapsedBreadcrumbs.length" class="breadcrumb-item d-inline-flex min-w-0">
                        <Dropdown togglerClass="'btn btn-light btn-sm px-1 p-0'">
                            <t t-set-slot="toggler">
                                <i class="fa fa-ellipsis-h"/>
                            </t>
                          <t t-foreach="collapsedBreadcrumbs" t-as="breadcrumb" t-key="breadcrumb.jsId">
                                <DropdownItem onSelected="() => this.onBreadcrumbClicked(breadcrumb.jsId)">
                                    <t t-call="hrm_theme.Breadcrumb.Name"/>
                                </DropdownItem>
                            </t>
                        </Dropdown>
                    </li>
                  <t t-foreach="visiblePathBreadcrumbs" t-as="breadcrumb" t-key="breadcrumb.jsId">
                        <li class="breadcrumb-item d-inline-flex min-w-0"
                            t-att-class="{ o_back_button: breadcrumb_last }" t-att-data-hotkey="breadcrumb_last and 'b'"
                            t-on-click.prevent="() => this.onBreadcrumbClicked(breadcrumb.jsId)">
                            <a href="#" class="fw-bold text-truncate"
                               t-att-data-tooltip="'Back to &quot;' + breadcrumb.name + '&quot;'"><t t-call="hrm_theme.Breadcrumb.Name"/></a>
                        </li>
                    </t>
                </ol>
            </t>
      <div class="d-flex gap-1 text-truncate">
                <div class="o_last_breadcrumb_item active d-flex gap-2 align-items-center min-w-0 lh-sm">
                    <span class="min-w-0 text-truncate" t-call="hrm_theme.Breadcrumb.Name"/>
                </div>
        <t t-call="hrm_theme.Breadcrumb.Actions"/> 
            </div>
        </div>

    <div t-else="" class="o_breadcrumb d-flex gap-1 text-truncate">
            <div class="o_last_breadcrumb_item active d-flex fs-4 min-w-0 align-items-center">
                <span class="min-w-0 text-truncate" t-call="hrm_theme.Breadcrumb.Name"/>
            </div>
      <t t-call="hrm_theme.Breadcrumb.Actions"/>
        </div>
    <t t-slot="control-panel-status-indicator"/>
    </t>

  <t t-name="hrm_theme.Breadcrumb.Actions">
        <div class="o_control_panel_breadcrumbs_actions d-inline-flex">
            <t t-slot="control-panel-additional-actions"/>
        </div>
    </t>

  <t t-name="hrm_theme.Breadcrumb.Name">
        <div class="fs-2 fw-bold text-color-theme">
            <t t-if="breadcrumb.name" t-out="breadcrumb.name" t-attf-class="fs-2"/>
          <t t-slot="control-panel-additional-breadcrums"/>
        </div>
    </t>
</templates>
